---
layout: post
title: "How to scrape web content?"
date: 2016-05-25
description: "How to scrape web content using beautifulsoup APIs?"
main-class: 'python'
postbook: 'inotebook'
published: true
color: '#b31917'
tags:
- python
- scrape
- scraping
- web
categories:
- python
introduction: "How to scrape web content using beautifulsoup APIs?"
---

<div tabindex="-1" id="notebook" class="border-box-sizing">
  <div class="container" id="notebook-container">

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Extracting-Information-from-Web-Pages">Extracting Information from Web Pages<a class="anchor-link" href="#Extracting-Information-from-Web-Pages">&#182;</a></h2><ul>
<li>This tutorial give an quick overview of how to read a web page and then extracts relevant information</li>
<li>Please make note that scraping certain information from web pages is illegal and please read terms and conditions of the respective website before doing so</li>
<li>This post is mostly educational and does not promote any kind of illegal web scraping and is not responsible if readers of this post do such activity</li>
<li>For this tutorial, the <a href="https://www.crummy.com/software/BeautifulSoup/">BeautifulSoup</a> APIs will be used </li>
<li>If not installed, use <em>pip install beautifulsoup4</em></li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
  <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="k">import</span> <span class="n">BeautifulSoup</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[13]:</div>
<div class="inner_cell">
  <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Enter the amazon product page which contains the product reviews</span>
<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[18]:</div>
<div class="inner_cell">
  <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">review_html</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[23]:</div>
<div class="inner_cell">
  <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">review_html</span><span class="p">,</span> <span class="s1">&#39;lxml&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[27]:</div>
<div class="inner_cell">
  <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">review_titles</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;class&#39;</span><span class="p">:</span> <span class="s1">&#39;a-size-base a-link-normal review-title a-color-base a-text-bold&#39;</span><span class="p">})</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[28]:</div>
<div class="inner_cell">
  <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">len</span><span class="p">(</span> <span class="n">review_titles</span> <span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[28]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>10</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[29]:</div>
<div class="inner_cell">
  <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">review_title</span> <span class="ow">in</span> <span class="n">review_titles</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span> <span class="n">review_title</span><span class="o">.</span><span class="n">text</span> <span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Five Star when you add Pros, Cons, and Price together
Oneplus two - got it via invite. Happy till now.
Good phone overall
Good specs for the money
It&apos;s nothing compared to it&apos;s predecessor .
The phone is nice and works good but
It&apos;s good but not very good.
OPO&gt;&gt;&gt;&gt;OPT
Great phone. Not perfect
THE BEST BUDGET PHONE OF 2016
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[30]:</div>
<div class="inner_cell">
  <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">review_texts</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s1">&#39;span&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;class&#39;</span><span class="p">:</span> <span class="s1">&#39;a-size-base review-text&#39;</span><span class="p">})</span>
<span class="nb">len</span><span class="p">(</span> <span class="n">review_texts</span> <span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[30]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>10</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[34]:</div>
<div class="inner_cell">
  <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>
<span class="n">r_texts</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span> <span class="nb">map</span><span class="p">(</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;[^a-zA-Z]&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">text</span> <span class="p">),</span> <span class="n">review_texts</span> <span class="p">)</span> <span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[41]:</div>
<div class="inner_cell">
  <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">r_texts</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[41]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>[&apos;My list of pros and cons  I think the cons are negated by the very low price  so five stars from me after all things considered     Very powerful  among the fastest out there         screen is just right for me     Oxygen  Android OS is even more customizable than vanilla Android  which allows for a few extra conveniences you don t get elsewhere     good battery life  I like the reversible usb c charger  but this does mean you need to be more aware of your battery life and usb c cables since you can t borrow other peoples chargers  but the battery life makes up for that     some people hate that there s no NFC  but NFC is still too immature inconvenient to be using in the wild  imo  Let s let the payment systems duke it out another year or two and then I ll decide if NFC is a must     a little bulky   get a case because this would fall with force     can run hot  but that comes with power comes heat &apos;]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[36]:</div>
<div class="inner_cell">
  <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">r_titles</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span> <span class="nb">map</span><span class="p">(</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;[^a-zA-Z]&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">text</span> <span class="p">),</span> <span class="n">review_titles</span> <span class="p">)</span> <span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[37]:</div>
<div class="inner_cell">
  <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">review_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span> <span class="p">{</span> <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="n">r_titles</span><span class="p">,</span> <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="n">r_texts</span> <span class="p">}</span> <span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[39]:</div>
<div class="inner_cell">
  <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">review_df</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[39]:</div>

<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
<thead>
  <tr style="text-align: right;">
    <th></th>
    <th>text</th>
    <th>title</th>
  </tr>
</thead>
<tbody>
  <tr>
    <th>0</th>
    <td>My list of pros and cons  I think the cons are...</td>
    <td>FiveStarwhenyouaddProsConsandPricetogether</td>
  </tr>
  <tr>
    <th>1</th>
    <td>Almost   yrs with smartphones   had Motorola D...</td>
    <td>OneplustwogotitviainviteHappytillnow</td>
  </tr>
  <tr>
    <th>2</th>
    <td>This is a great phone overall but its missing ...</td>
    <td>Goodphoneoverall</td>
  </tr>
  <tr>
    <th>3</th>
    <td>Quiet nice phone  feels good in hands  top spe...</td>
    <td>Goodspecsforthemoney</td>
  </tr>
  <tr>
    <th>4</th>
    <td>I have had my Oneplus One for over two years n...</td>
    <td>Itsnothingcomparedtoitspredecessor</td>
  </tr>
</tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>

</div>
</div>
</div>

</div>
  </div>
</div>
